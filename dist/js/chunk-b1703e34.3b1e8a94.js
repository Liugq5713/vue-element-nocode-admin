(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b1703e34"],{"0d67":function(t,e,n){},"0d76":function(t){t.exports={code:2e4,message:"OK",data:{items:[{id:2000101,name:"礼品卡",type:"gift_card",price:1990,inventory:57,sales:0,status:"ON_SALE",allow_associate:!1,unlimited_stock:!0,introduction:"商品说明",created_at:1557826153,shipping_type:"address"},{id:2000101,name:"礼品卡",type:"gift_card",price:1990,inventory:57,sales:0,status:"ON_SALE",allow_associate:!1,unlimited_stock:!0,introduction:"商品说明",created_at:1557826153,shipping_type:"address"},{id:2000101,name:"礼品卡",type:"gift_card",price:1990,inventory:57,sales:0,status:"ON_SALE",allow_associate:!1,unlimited_stock:!0,introduction:"商品说明",created_at:1557826153,shipping_type:"address"}],count:77}}},"23bf":function(t,e,n){"use strict";var a=n("731e"),i=n.n(a);i.a},2820:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:5}},[n("el-card",{staticClass:"box-card"},[n("TableEditor",{attrs:{getTableAPI:t.getTableAPI},on:{"update:getTableAPI":function(e){t.getTableAPI=e},"update:get-table-a-p-i":function(e){t.getTableAPI=e},change:t.setTableData}})],1)],1),n("el-col",{attrs:{span:19}},[n("TableExhibition",{attrs:{getTableAPI:t.getTableAPI,tableData:t.tableData}})],1)],1)],1)},i=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"clearfix",staticStyle:{"margin-bottom":"15px"},attrs:{slot:"header"},slot:"header"},[n("el-input",{staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:"获取数据的函数"},model:{value:t.getTableAPI,callback:function(e){t.getTableAPI="string"===typeof e?e.trim():e},expression:"getTableAPI"}}),n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.prettierJSON(this.codeString)}}},[t._v("生成表格")])],1),n("el-input",{attrs:{type:"textarea",autosize:{minRows:5},placeholder:"请输入内容, eg:{value:label}，记得给label加上引号"},on:{change:t.prettierJSON},model:{value:t.codeString,callback:function(e){t.codeString=e},expression:"codeString"}})],1)},l=[],o=n("f499"),c=n.n(o),s=n("ed08"),u=n("0d76"),d={props:{getTableAPI:{type:String}},data:function(){return{codeObject:"",codeString:c()(u,void 0,2)}},computed:{getTableDataAPI:{get:function(){return this.getTableAPI},set:function(t){this.$emit("update:getTableAPI",t)}}},created:function(){this.$emit("change",u)},methods:{syntaxHighlight:s["d"],gen:function(){},prettierJSON:function(t){this.codeObject=JSON.parse(t),this.codeString=c()(this.codeObject,void 0,2),this.$emit("change",this.codeObject)}}},p=d,b=n("2877"),h=Object(b["a"])(p,r,l,!1,null,null,null),m=h.exports,f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"box-card",staticStyle:{"margin-bottom":"20px"}},[n("TableExhibitionQuery",{attrs:{headers:t.headers}})],1),n("el-card",{staticClass:"box-card"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("TableExhibitionHeader",{attrs:{headers:t.headers},on:{"update:headers":function(e){t.headers=e}}})],1),n("el-col",{attrs:{span:18}},[n("TableExhibitionBody",{attrs:{list:t.list,headers:t.headers}})],1)],1)],1)],1)},y=[],g=n("a4bb"),v=n.n(g),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("h3",[t._v("表格展示区")]),n("el-table",{key:t.table_key,staticStyle:{width:"100%"},attrs:{data:t.list,border:""},on:{"header-click":t.test}},[t._l(t.headers,function(e){return[e.show?n("el-table-column",{key:e.key,attrs:{label:e.label,align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){var a=n.row;return[t._v(t._s(a[e.key]))]}}],null,!0)}):t._e()]})],2)],1)},k=[],w={props:{list:{type:null,required:!0},headers:{type:Array,required:!0}},watch:{headers:function(){this.table_key++}},data:function(){return{query:{limit:20,cursor:1},table_key:0,total:0}},created:function(){},methods:{editdata:function(){},test:function(t){console.log("val",t)}}},x=w,T=Object(b["a"])(x,_,k,!1,null,null,null),q=T.exports,S=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-query"},[n("div",[t._v("\n    查询项\n    "),t._l(t.headers,function(e){return n("span",{key:e.key},[e.query?n("el-tag",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"}},[t._v(t._s(e.label))]):t._e()],1)})],2),n("div",[n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.handleClipboard(t.srcTableCode,e)}}},[t._v("复制代码")]),n("el-button",{attrs:{type:"text"},on:{click:t.skipToEditorCode}},[t._v("在线编辑")])],1)])},A=[],E=n("cebc"),O=n("2f62"),C={props:{headers:{type:Array,required:!0}},computed:Object(E["a"])({},Object(O["b"])(["srcTableCode"])),methods:{handleClipboard:function(t,e){var n=this;Object(s["a"])(t,e).then(function(){n.$message.success("已经复制到剪贴板")})},skipToEditorCode:function(){this.$router.push("/code-editor?code=table")}}},I=C,j=(n("c300"),Object(b["a"])(I,S,A,!1,null,"89904e16",null)),P=j.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"table-header"},[n("h3",[t._v("表头编辑区")]),n("draggable",{attrs:{group:"people"},on:{change:t.set,start:function(e){t.drag=!0},end:function(e){t.drag=!1}},model:{value:t.tableHeaders,callback:function(e){t.tableHeaders=e},expression:"tableHeaders"}},t._l(t.tableHeaders,function(e){return n("div",{key:e.key},[n("el-popover",{attrs:{placement:"right",trigger:"focus"}},[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"该字段在表格中"+(e.show?"显示":"隐藏"),placement:"top-start"}},[e.show?n("el-button",{attrs:{type:"info",icon:"el-icon-close",size:"small",circle:""},on:{click:function(n){return t.hide(e)}}}):n("el-button",{attrs:{type:"success",icon:"el-icon-check",size:"small",circle:""},on:{click:function(n){return t.show(e)}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"该字段"+(""===e.opt?"未":"")+"置于template标签内，置于template方便自定义",placement:"top-start"}},[""===e.opt?n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-coordinate",circle:""},on:{click:function(n){return t.opt(e,"template")}}}):n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-coordinate",circle:""},on:{click:function(n){return t.opt(e,"")}}})],1),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"该字段"+(e.query?"是":"不是")+"查询项",placement:"top-start"}},[e.query?n("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-magic-stick",circle:""},on:{click:function(n){return t.query(e,!1)}}}):n("el-button",{attrs:{type:"warning",size:"small",icon:"el-icon-search",circle:""},on:{click:function(n){return t.query(e,!0)}}})],1),n("div",{staticClass:"table-header-card",attrs:{slot:"reference"},slot:"reference"},[e.show?n("el-tag",{attrs:{type:"success"}},[t._v(t._s(e.key))]):n("el-tag",{attrs:{type:"info"}},[t._v(t._s(e.key))]),n("div",[n("el-input",{staticClass:"input-custom",attrs:{size:"small",placeholder:"请输入"},model:{value:e.label,callback:function(n){t.$set(e,"label","string"===typeof n?n.trim():n)},expression:"header.label"}})],1)],1)],1)],1)}),0)],1)},z=[],D=n("310e"),H=n.n(D),L={components:{draggable:H.a},props:{headers:{type:Array,required:!0}},watch:{headers:function(t){this.tableHeaders=t}},data:function(){return{tableHeaders:this.headers}},methods:{set:function(){this.$emit("update:headers",this.tableHeaders)},show:function(t){t.show=!0},hide:function(t){t.show=!1},opt:function(t,e){t.opt=e},query:function(t,e){console.log("query",e),t.query=e}}},N=L,J=(n("23bf"),Object(b["a"])(N,$,z,!1,null,"139d5c65",null)),B=J.exports,Q=function(t){return t.filter(function(t){return t.show}).map(function(t){return F[t.key]||"template"===t.opt?K(t.key,t.label):R(t.key,t.label)}).join("\n      ")},R=function(t,e){return"<el-table-column prop='".concat(t,"' label='").concat(e,"' align='center' />")},K=function(t,e){var n="";return n=F[t]?"parseTime(row.".concat(t,")"):"row.".concat(t),"<el-table-column label='".concat(e,"'  align='center'>\n          <template slot-scope={row}>\n            {{ ").concat(n," }}\n          </template>\n        </el-table-column>")},F={created_at:!0,create_time:!0,updated_at:!0,update_time:!0,start_time:!0,end_time:!0},G=function(t,e){return t.filter(function(t){return t.query}).map(function(t){return"number"===typeof t.value?U(t.key,e):"string"===typeof t.value?M(t.key,e):"boolean"===typeof t.value?V(t.key,e):"start_time"===t.key||"end_time"===t.key?W(e):void 0}).join("\n      ")},M=function(t,e){return"<el-input v-model.trim='query.".concat(t,"' placeholder='请输入").concat(t,"'  style='width:200px' @keyup.enter.native='").concat(e,"' />")},U=function(t,e){return"<el-input v-model.number='query.".concat(t,"' placeholder='请输入").concat(t,"' style='width:200px' type='number' @keyup.enter.native='").concat(e,"'></el-input>")},V=function(t,e){return"<el-checkbox v-model='query.".concat(t,"' label='true' @change='").concat(e,"'></el-checkbox>")},W=function(t){return"<date-range :start.sync='query.start_time' :end.sync='query.end_time' @change='".concat(t,"' />")},X=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"getList";return'\n  <template>\n  <div class="app-container">\n    <div style="margin-bottom: 20px">\n      '.concat(G(t,e),'\n      <el-button\n        type="primary"\n        style="margin-left: 10px"\n        icon="el-icon-search"\n        @click="').concat(e,'ByQuery"\n      >搜索</el-button>\n    </div>\n    <el-table :data="lists" border style="width: 100%">\n      ').concat(Q(t),'\n      <el-table-column label="操作" align="center">\n        <template slot-scope="scope">\n          <el-button size="mini" type="primary" @click="editList(scope.row)">编辑</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <pagination\n      :total="total"\n      :page.sync="query.cursor"\n      :limit.sync="query.limit"\n      @pagination="').concat(e,'"\n    />\n  </div>\n</template>\n\n<script>\nimport { ').concat(e,' } from "./api.js";\n\nexport default {\n  data() {\n    return {\n      lists: undefined,\n      query: {\n        limit: 20,\n        cursor: 1\n      },\n      total: 0\n    };\n  },\n  created() {\n    this.').concat(e,"();\n  },\n  methods: {\n    async ").concat(e,"() {\n      const res = await getList(this.query);\n      this.lists = res.data.items;\n      this.total = res.data.total_count;\n    },\n    ").concat(e,'ByQuery() {\n      this.query.cursor = 1;\n      this.getList();\n    },\n    editList(list) {\n      console.log("list", list);\n    }\n  }\n};\n<\/script>')},Y={components:{TableExhibitionBody:q,TableExhibitionHeader:B,TableExhibitionQuery:P},props:{tableData:{type:Object,required:!0},getTableAPI:{type:String,required:!0}},watch:{tableData:{handler:function(t){var e=this;this.list=t.data&&t.data.items.slice(0,3),this.list&&(this.headers=v()(this.list[0]).map(function(t){return{value:e.list[0][t],key:t,label:t,show:!0,opt:"",query:!1}}))},immediate:!0},headers:{handler:function(t){this.code=X(t,this.getTableAPI),this.$store.commit("SET_SRC_TABLE_CODE",this.code),window.localStorage.removeItem("vue-element-table-gen-code"),window.localStorage.setItem("vue-element-table-gen-code",this.code)},deep:!0}},data:function(){return{list:[],code:"",headers:[],query:{limit:20,cursor:1},total:0}},created:function(){},methods:{editdata:function(){},test:function(t){console.log("val",t)}}},Z=Y,tt=Object(b["a"])(Z,f,y,!1,null,null,null),et=tt.exports,nt={components:{TableEditor:m,TableExhibition:et},data:function(){return{tableData:{},getTableAPI:""}},methods:{setTableData:function(t){this.tableData=t}}},at=nt,it=Object(b["a"])(at,a,i,!1,null,null,null),rt=it.exports;e["default"]=rt},"731e":function(t,e,n){},c300:function(t,e,n){"use strict";var a=n("0d67"),i=n.n(a);i.a}}]);
//# sourceMappingURL=chunk-b1703e34.3b1e8a94.js.map